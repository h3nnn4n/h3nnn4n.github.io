(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["index"],{

/***/ "./index.ts":
/*!******************!*\
  !*** ./index.ts ***!
  \******************/
/*! exports provided: load */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"load\", function() { return load; });\n/* harmony import */ var _js_user_interface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/user_interface */ \"./js/user_interface.ts\");\n/* harmony import */ var _js_clifford_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js/clifford_manager */ \"./js/clifford_manager.ts\");\n\n\nvar Rust;\nvar clifford_manager;\nvar init = function () {\n    Rust.init();\n    clifford_manager = new _js_clifford_manager__WEBPACK_IMPORTED_MODULE_1__[\"CliffordManager\"](Rust);\n    Object(_js_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"bindEvents\"])(render_attractor, find_random_attractor);\n    render_attractor();\n};\nfunction render_attractor() {\n    clifford_manager.update_config();\n    clifford_manager.start();\n    Object(_js_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"resetProgressBar\"])();\n    render_loop();\n}\nfunction find_random_attractor() {\n    var lyap = Rust.init_lyapunov();\n    lyap.find_chaotic_params();\n    return lyap;\n}\nfunction render_loop() {\n    if (clifford_manager.finished_running() && !clifford_manager.state_control.did_state_change()) {\n        return;\n    }\n    clifford_manager.interpolate_and_render_step();\n    setTimeout(function () {\n        render_loop();\n    }, 0);\n}\nvar load = function () {\n    (function () { return __webpack_require__.e(/*! import() | strange_attractor_explorer */ \"strange_attractor_explorer\").then(__webpack_require__.bind(null, /*! ./pkg/strange_attractor_explorer.js */ \"./pkg/strange_attractor_explorer.js\")).then(function (module) {\n        Rust = module;\n        init();\n    }); })();\n};\n\n\n//# sourceURL=webpack:///./index.ts?");

/***/ }),

/***/ "./js/clifford_manager.ts":
/*!********************************!*\
  !*** ./js/clifford_manager.ts ***!
  \********************************/
/*! exports provided: CliffordManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CliffordManager\", function() { return CliffordManager; });\n/* harmony import */ var _user_interface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./user_interface */ \"./js/user_interface.ts\");\n/* harmony import */ var _state_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./state_control */ \"./js/state_control.ts\");\n\n\nvar CliffordManager = /** @class */ (function () {\n    function CliffordManager(rust) {\n        this.last_bar_value = 0;\n        this.rust = rust;\n        var canvas = Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])();\n        this.width = canvas.width;\n        this.height = canvas.height;\n        this.attractor = this.rust.init_attractor();\n        this.image_data = this.rust.init_image_data(this.width, this.height);\n        this.iters = Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('iters_value');\n        this.frames = Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('frames_value');\n        this.gamma = Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('gamma_value');\n        this.parameters_start = [\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('a_value_start'),\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('b_value_start'),\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('c_value_start'),\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('d_value_start'),\n        ];\n        this.parameters_end = [\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('a_value_end'),\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('b_value_end'),\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('c_value_end'),\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('d_value_end'),\n        ];\n        this.color_start = Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readColor\"])('color_value_start');\n        this.color_end = Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readColor\"])('color_value_end');\n        this.attractor.set_iters(this.iters);\n        this.state_control = new _state_control__WEBPACK_IMPORTED_MODULE_1__[\"StateControl\"](this.frames);\n    }\n    CliffordManager.prototype.update_config = function () {\n        this.iters = Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('iters_value');\n        this.frames = Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('frames_value');\n        this.gamma = Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('gamma_value');\n        this.parameters_start = [\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('a_value_start'),\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('b_value_start'),\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('c_value_start'),\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('d_value_start'),\n        ];\n        this.parameters_end = [\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('a_value_end'),\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('b_value_end'),\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('c_value_end'),\n            Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readValue\"])('d_value_end'),\n        ];\n        this.color_start = Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readColor\"])('color_value_start');\n        this.color_end = Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"readColor\"])('color_value_end');\n        this.attractor.set_iters(this.iters);\n        this.state_control.frames = this.frames;\n    };\n    CliffordManager.prototype.start = function () {\n        Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"resetProgressBar\"])();\n        this.last_bar_value = 0;\n        this.state_control.start();\n    };\n    CliffordManager.prototype.finished_running = function () {\n        return this.state_control.is_finished();\n    };\n    CliffordManager.prototype.interpolate_and_render_step = function () {\n        this.update_progress_bar();\n        this.state_control.tick();\n        if (this.state_control.is_bound_checking()) {\n            if (this.state_control.did_state_change()) {\n                this.image_data.reset();\n                this.attractor.find_bounding_box(true);\n            }\n            var p = this.state_control.get_p();\n            this.set_attractor_parameters_and_color(p);\n            this.attractor.find_bounding_box(false);\n        }\n        else if (this.state_control.is_rendering()) {\n            if (this.state_control.did_state_change()) {\n                this.attractor.bump_bounding_box();\n            }\n            var p = this.state_control.get_p();\n            this.set_attractor_parameters_and_color(p);\n            this.attractor.iterate(this.image_data);\n        }\n        else if (this.state_control.is_drawing()) {\n            this.draw_to_canvas();\n        }\n        else if (this.state_control.is_finished()) {\n            //\n        }\n    };\n    CliffordManager.prototype.update_progress_bar = function () {\n        var value = this.state_control.get_progress();\n        if (value - this.last_bar_value < 5 && value < 100) {\n            return;\n        }\n        this.last_bar_value = value;\n        Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"updateProgressBar\"])(value);\n    };\n    CliffordManager.prototype.set_attractor_parameters_and_color = function (p) {\n        var parameters = this.interpolate_parameters(p);\n        this.set_attractor_params(parameters);\n        var color = this.interpolate_colors(p);\n        this.attractor.set_color(color[0], color[1], color[2]);\n    };\n    CliffordManager.prototype.interpolate_parameters = function (p) {\n        return this.interpolate_vectors(this.parameters_start, this.parameters_end, p);\n    };\n    CliffordManager.prototype.interpolate_colors = function (p) {\n        return this.interpolate_vectors(this.color_start, this.color_end, p);\n    };\n    CliffordManager.prototype.interpolate_vectors = function (a, b, p) {\n        var parameters = [];\n        for (var index = 0; index < a.length; index++) {\n            parameters.push((b[index] - a[index]) * p + a[index]);\n        }\n        return parameters;\n    };\n    CliffordManager.prototype.set_attractor_params = function (parameters) {\n        this.attractor.set_parameters(parameters[0], parameters[1], parameters[2], parameters[3]);\n    };\n    CliffordManager.prototype.draw_to_canvas = function () {\n        this.image_data.normalize_image();\n        this.image_data.invert_colors();\n        this.image_data.gamma_correction(this.gamma);\n        var image_pixels = this.image_data.as_u8();\n        var canvas = Object(_user_interface__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])();\n        var canvas_context = canvas.getContext('2d');\n        if (canvas_context != null) {\n            var clamped_array = new Uint8ClampedArray(image_pixels);\n            var image_data = new ImageData(clamped_array, this.width, this.height);\n            canvas_context.putImageData(image_data, 0, 0);\n        }\n    };\n    return CliffordManager;\n}());\n\n\n\n//# sourceURL=webpack:///./js/clifford_manager.ts?");

/***/ }),

/***/ "./js/state_control.ts":
/*!*****************************!*\
  !*** ./js/state_control.ts ***!
  \*****************************/
/*! exports provided: StateControl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StateControl\", function() { return StateControl; });\nvar Mode;\n(function (Mode) {\n    Mode[Mode[\"START\"] = 0] = \"START\";\n    Mode[Mode[\"BOUND_CHECK\"] = 1] = \"BOUND_CHECK\";\n    Mode[Mode[\"RENDER\"] = 2] = \"RENDER\";\n    Mode[Mode[\"DRAWING\"] = 3] = \"DRAWING\";\n    Mode[Mode[\"FINISHED\"] = 4] = \"FINISHED\";\n})(Mode || (Mode = {}));\nvar StateControl = /** @class */ (function () {\n    function StateControl(frames) {\n        this.current_frame = 0;\n        this.frames = frames;\n        this.current_mode = Mode.START;\n        this.changed_state = false;\n    }\n    StateControl.prototype.get_p = function () {\n        return this.current_frame / this.frames;\n    };\n    StateControl.prototype.get_progress = function () {\n        if (this.is_starting()) {\n            return 0;\n        }\n        if (this.is_finished() || this.is_drawing()) {\n            return 100;\n        }\n        var value = this.get_p() * 0.5;\n        if (this.is_rendering()) {\n            value += 0.5;\n        }\n        return value * 100;\n    };\n    StateControl.prototype.tick = function () {\n        this.changed_state = false;\n        if (this.is_starting()) {\n            this.current_frame = 0;\n            this.current_mode = Mode.BOUND_CHECK;\n            this.changed_state = true;\n        }\n        else if (this.is_bound_checking()) {\n            this.current_frame++;\n            if (this.current_frame == this.frames) {\n                this.current_frame = 0;\n                this.current_mode = Mode.RENDER;\n                this.changed_state = true;\n            }\n        }\n        else if (this.is_rendering()) {\n            this.current_frame++;\n            if (this.current_frame == this.frames) {\n                this.current_frame = 0;\n                this.current_mode = Mode.DRAWING;\n                this.changed_state = true;\n            }\n        }\n        else if (this.is_drawing()) {\n            this.changed_state = true;\n            this.current_mode = Mode.FINISHED;\n        }\n        else if (this.is_finished()) {\n            //\n        }\n    };\n    StateControl.prototype.start = function () {\n        this.current_mode = Mode.START;\n    };\n    StateControl.prototype.is_starting = function () {\n        return this.current_mode == Mode.START;\n    };\n    StateControl.prototype.is_bound_checking = function () {\n        return this.current_mode == Mode.BOUND_CHECK;\n    };\n    StateControl.prototype.is_rendering = function () {\n        return this.current_mode == Mode.RENDER;\n    };\n    StateControl.prototype.is_drawing = function () {\n        return this.current_mode == Mode.DRAWING;\n    };\n    StateControl.prototype.is_finished = function () {\n        return this.current_mode == Mode.FINISHED;\n    };\n    StateControl.prototype.did_state_change = function () {\n        return this.changed_state;\n    };\n    return StateControl;\n}());\n\n\n\n//# sourceURL=webpack:///./js/state_control.ts?");

/***/ }),

/***/ "./js/user_interface.ts":
/*!******************************!*\
  !*** ./js/user_interface.ts ***!
  \******************************/
/*! exports provided: bindEvents, readValue, readColor, getCanvas, updateProgressBar, resetProgressBar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"bindEvents\", function() { return bindEvents; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"readValue\", function() { return readValue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"readColor\", function() { return readColor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getCanvas\", function() { return getCanvas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateProgressBar\", function() { return updateProgressBar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"resetProgressBar\", function() { return resetProgressBar; });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var a_color_picker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! a-color-picker */ \"./node_modules/a-color-picker/dist/acolorpicker.js\");\n/* harmony import */ var a_color_picker__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(a_color_picker__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar JSColorPicker = __webpack_require__(/*! jscolor-picker */ \"./node_modules/jscolor-picker/jscolor.js\");\nfunction bindEvents(render_callback, random_callback) {\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#render').click(render_callback);\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#random').click(function () { setRandomParams(random_callback()); });\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#download').click(downloadCanvas);\n}\nfunction downloadCanvas() {\n    var dataURL = getCanvas().toDataURL('image/png');\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#download').attr('href', dataURL);\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#download').attr('download', 'image.png');\n}\nfunction setRandomParams(params) {\n    var start_params = params.get_start_params();\n    var end_params = params.get_end_params();\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#a_value_start').val(start_params[0]);\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#b_value_start').val(start_params[1]);\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#c_value_start').val(start_params[2]);\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#d_value_start').val(start_params[3]);\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#a_value_end').val(end_params[0]);\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#b_value_end').val(end_params[1]);\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#c_value_end').val(end_params[2]);\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#d_value_end').val(end_params[3]);\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#render').click();\n}\nfunction readValue(name) {\n    var value = jquery__WEBPACK_IMPORTED_MODULE_0__('#' + name).val();\n    return Number(value);\n}\nfunction readColor(name) {\n    var value = jquery__WEBPACK_IMPORTED_MODULE_0__('#' + name).val();\n    var parsed = a_color_picker__WEBPACK_IMPORTED_MODULE_1__[\"parseColor\"](value, \"rgb\");\n    return parsed;\n}\nfunction getCanvas() {\n    var j_canvas = jquery__WEBPACK_IMPORTED_MODULE_0__('#canvas');\n    var canvas = j_canvas[0];\n    return canvas;\n}\nfunction updateProgressBar(value) {\n    var bar = jquery__WEBPACK_IMPORTED_MODULE_0__('#progress_bar');\n    bar.css('width', value + '%');\n}\nfunction resetProgressBar() {\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#progress_bar').hide();\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#progress_bar').width(0 + '%');\n    jquery__WEBPACK_IMPORTED_MODULE_0__('#progress_bar').show();\n}\n\n\n\n//# sourceURL=webpack:///./js/user_interface.ts?");

/***/ })

}]);